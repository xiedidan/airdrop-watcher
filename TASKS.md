# WebMon 网页监控工具 - 任务看板

> **最后更新**: 2025-12-24 | **更新人**: Claude
> **项目阶段**: 阶段十二 - WebUI 开发 (Phase 5: 体验优化)
> **进度**: 91% (75/82 + 7 待完成任务)

---

## 🎯 当前冲刺目标

**目标**: 完善 WebUI 界面体验
**关键成果**:
- ✅ FastAPI 后端框架搭建
- ✅ Vue 3 前端框架搭建
- ✅ 任务管理 CRUD 功能
- ✅ SSE 实时通知
- ✅ Docker 部署支持
- ⬜ WebUI 体验优化（新增任务）

---

## 📊 Agent 工作分配

| Agent | 当前任务 | 状态 | 开始时间 | 预计完成 |
|-------|---------|------|---------|---------|
| **Human** | 决策和审查 | - | - | - |
| **Claude** | 无 | ✅ 完成 #088 | 2025-12-24 | - |
| **KIMI** | 无 | 💤 空闲 | - | - |
| **Kiro** | 无 | 💤 空闲 | - | - |
| **Kilo** | 无 | 💤 空闲 | - | - |

---

## 📋 待办 (TODO)

### 🔴 高优先级（紧急）

**WebUI 体验优化 - Phase 5 新增任务**

#### 核心功能补全

#### 界面体验优化

- [ ] **#089** 实现浅色/深色主题切换 `@无人认领` `预计:2h`
  - 描述：支持深色主题（默认）和浅色主题切换，记住用户偏好
  - 验收：顶部导航栏有主题切换按钮，切换后立即生效，刷新后保持

- [ ] **#090** 优化 Dashboard 任务卡片视图 `@无人认领` `预计:2h`
  - 描述：将 Dashboard 的任务概览从表格改为卡片式布局，每个卡片显示任务名称、状态、检测间隔、变化次数、快捷操作按钮
  - 设计参考：webui_design.md 4.2 节任务概览卡片设计
  - 验收：卡片布局美观，支持快捷编辑和禁用操作

- [ ] **#091** 优化 History Diff 对比视图 `@无人认领` `预计:2h`
  - 描述：美化内容对比弹窗，使用并排对比视图或 unified diff 视图，添加语法高亮
  - 验收：新旧内容对比清晰，变化部分高亮显示

- [ ] **#092** 实现移动端响应式适配 `@无人认领` `预计:4h`
  - 描述：针对移动端优化布局，包括：顶部导航改为汉堡菜单、表格改为卡片列表、弹窗改为全屏抽屉
  - 断点：sm(640px)、md(768px)、lg(1024px)
  - 验收：在手机和平板上界面可正常使用

- [ ] **#093** 实现任务详情展开功能 `@无人认领` `预计:2h`
  - 描述：Tasks 页面任务列表点击行展开详情（而非弹窗），显示完整配置和操作按钮
  - 设计参考：webui_design.md 4.3 节点击行展开详情设计
  - 验收：点击任务行展开详情面板，再次点击收起

- [ ] **#094** 优化前端页面标题 `@无人认领` `预计:0.5h`
  - 描述：将 index.html 中的 title 从 "frontend" 改为 "WebMon"，添加 favicon
  - 验收：浏览器标签显示 "WebMon"，有正确的图标

**原有高优先级任务**

- [ ] **#051** 编写配置管理单元测试 `@无人认领` `预计:4h` `依赖:#007,#008,#009` [详情](tasks/details/todo/051-config-tests.md)
  - 描述：测试ConfigManager、EnvConfig、JsonConfig的所有功能
  - 验收：测试覆盖率>90%，包含边界情况

- [ ] **#052** 编写变化检测单元测试 `@无人认领` `预计:4h` `依赖:#021,#023,#024` [详情](tasks/details/todo/052-detection-tests.md)
  - 描述：测试各种变化检测算法的准确性
  - 验收：覆盖哈希检测、相似度检测、结构化检测

- [ ] **#053** 编写推送服务单元测试 `@无人认领` `预计:4h` `依赖:#026-#029` [详情](tasks/details/todo/053-notification-tests.md)
  - 描述：测试各推送平台的集成功能
  - 验收：包含网络异常处理和重试机制测试

### 🟡 中优先级

**2周内完成的重要任务**


- [ ] **#049** 实现内存管理优化 `@无人认领` `预计:4h` `依赖:无` [详情](tasks/details/todo/049-memory-manager.md)
  - 描述：创建MemoryManager类，监控和优化内存使用
  - 验收：10个并发任务内存占用<500MB

- [ ] **#050** 实现缓存机制 `@无人认领` `预计:3h` `依赖:#017` [详情](tasks/details/todo/050-cache-system.md)
  - 描述：支持内容缓存，减少重复请求
  - 验收：缓存命中率>80%，缓存时间可配置

- [ ] **#054** 编写CLI命令集成测试 `@无人认领` `预计:6h` `依赖:#031-#039` [详情](tasks/details/todo/054-cli-integration-tests.md)
  - 描述：端到端测试所有CLI命令
  - 验收：覆盖所有用户场景，包含错误处理

- [ ] **#055** 编写性能测试 `@无人认领` `预计:4h` `依赖:#041,#042` [详情](tasks/details/todo/055-performance-tests.md)
  - 描述：测试系统在高负载下的性能
  - 验收：10并发任务稳定运行24小时

### 🟢 低优先级

**可选或后续阶段任务**

- [ ] **#068** 编写AI分析模块测试 `@无人认领` `预计:2h` `依赖:#063-#067`
  - 描述：测试AI服务的各项功能
  - 验收：覆盖配置加载、API调用、模板渲染、错误处理

- [ ] **#056** 编写安装指南文档 `@无人认领` `预计:3h` `依赖:#031` [详情](tasks/details/todo/056-installation-guide.md)
  - 描述：详细的安装和配置说明
  - 验收：新用户能在30分钟内完成安装和首次使用

- [ ] **#057** 编写使用手册 `@无人认领` `预计:4h` `依赖:#031-#039` [详情](tasks/details/todo/057-user-manual.md)
  - 描述：详细说明每个命令的使用方法
  - 验收：包含示例和常见问题解答

- [ ] **#058** 编写配置说明文档 `@无人认领` `预计:3h` `依赖:#007` [详情](tasks/details/todo/058-config-documentation.md)
  - 描述：详细解释所有配置选项
  - 验收：包含配置示例和最佳实践

- [ ] **#059** 创建README.md `@无人认领` `预计:2h` `依赖:#056-#058` [详情](tasks/details/todo/059-readme.md)
  - 描述：项目主页文档，包含快速开始指南
  - 验收：内容完整，格式美观，有徽章和截图

- [ ] **#060** 创建示例配置文件 `@无人认领` `预计:2h` `依赖:#007` [详情](tasks/details/todo/060-example-configs.md)
  - 描述：创建config.json.example和完整示例
  - 验收：包含所有可配置项的示例值

- [ ] **#061** 项目打包配置 `@无人认领` `预计:3h` `依赖:全部核心功能` [详情](tasks/details/todo/061-packaging.md)
  - 描述：配置setup.py，支持pip安装
  - 验收：可通过pip install安装

- [ ] **#062** 创建发布检查清单 `@无人认领` `预计:1h` `依赖:全部任务` [详情](tasks/details/todo/062-release-checklist.md)
  - 描述：发布前的各项检查清单
  - 验收：包含功能、性能、安全检查项

---

## 🚧 进行中 (DOING)

> 当前无进行中任务

---

## ✅ 已完成 (DONE)

### 最近完成 (2025-12-24)

- [x] **#088** 实现 Settings 关于页面 `@Claude` `完成:2025-12-24` ⏱️ 0.5h
- [x] **#087** 实现历史记录导出功能 `@Claude` `完成:2025-12-24` ⏱️ 0.5h
- [x] **#086** 实现 Dashboard 监控控制按钮 `@Claude` `完成:2025-12-24` ⏱️ 0.3h
- [x] **#085** 实现底部状态栏组件 `@Claude` `完成:2025-12-24` ⏱️ 0.5h

### 最近完成 (2025-12-22)

- [x] **#047** 实现敏感信息保护 `@Claude` `完成:2025-12-22` ⏱️ 1.5h
- [x] **#084** 实现 CLI web 子命令 `@Claude` `完成:2025-12-22` ⏱️ 0.5h
- [x] **#083** 编写 docker-compose.yml `@Claude` `完成:2025-12-22` ⏱️ 0.5h
- [x] **#082** 编写 Dockerfile `@Claude` `完成:2025-12-22` ⏱️ 1h
- [x] **#081** 实现通知测试功能 `@Claude` `完成:2025-12-22` ⏱️ 1h
- [x] **#080** 实现 Settings 页面 `@Claude` `完成:2025-12-22` ⏱️ 2h
- [x] **#079** 实现配置管理 API `@Claude` `完成:2025-12-22` ⏱️ 1.5h

### 最近完成 (2025-12-19)

- [x] **#078** 前端 SSE 集成 `@Claude` `完成:2025-12-19` ⏱️ 1h
- [x] **#077** 实现 History 页面 `@Claude` `完成:2025-12-19` ⏱️ 1h
- [x] **#076** 实现历史记录 API `@Claude` `完成:2025-12-19` ⏱️ 1h
- [x] **#075** 实现 SSE 事件流 `@Claude` `完成:2025-12-19` ⏱️ 1h
- [x] **#074** 实现 Tasks 页面 `@Claude` `完成:2025-12-19` ⏱️ 1.5h
- [x] **#073** 实现 Dashboard 页面 `@Claude` `完成:2025-12-19` ⏱️ 1h
- [x] **#072** 搭建 Vue 3 前端框架 `@Claude` `完成:2025-12-19` ⏱️ 1h

### 最近完成 (2025-12-18)

- [x] **#071** 实现监控控制 API `@Claude` `完成:2025-12-18` ⏱️ 0.5h
- [x] **#070** 实现任务管理 API `@Claude` `完成:2025-12-18` ⏱️ 0.5h
- [x] **#069** 搭建 FastAPI 后端框架 `@Claude` `完成:2025-12-18` ⏱️ 0.5h

### 最近完成 (2025-12-12)

- [x] **#067** 集成AI分析到通知流程 `@Claude` `完成:2025-12-12` ⏱️ 0.5h
- [x] **#064** 添加AI配置项 `@Claude` `完成:2025-12-12` ⏱️ 0.5h
- [x] **#066** 实现提示词模板系统 `@Claude` `完成:2025-12-12` ⏱️ 0.5h
- [x] **#063** 创建AI分析服务模块 `@Claude` `完成:2025-12-12` ⏱️ 1.5h
- [x] **#065** 更新Task模型添加描述字段 `@Claude` `完成:2025-12-12` ⏱️ 0.5h

### 最近完成 (2025-12-07 ~ 2025-12-08)

- [x] **#000** 修复CLI命令显示逻辑 `@Claude` `完成:2025-12-08` ⏱️ 1.5h
- [x] **#000** Discord通知功能完整测试 `@Claude` `完成:2025-12-07` ⏱️ 3h
- [x] **#059** 创建README.md `@Claude` `完成:2025-12-07` ⏱️ 1.5h
- [x] **#000** 创建快速开始指南 `@Claude` `完成:2025-12-07` ⏱️ 0.5h
- [x] **#000** 创建更新日志 `@Claude` `完成:2025-12-07` ⏱️ 0.5h

### 最近完成 (2025-12-01 ~ 2025-12-02)

- [x] **#048** 实现网络安全功能 `@Claude` `完成:2025-12-02` ⏱️ 4h
- [x] **#000** 修复环境变量配置问题 `@Claude` `完成:2025-12-02` ⏱️ 2h
- [x] **#000** 项目目录整理 `@Claude` `完成:2025-12-02` ⏱️ 1.5h
- [x] **#000** 修复通知系统环境变量解析 `@Claude` `完成:2025-12-02` ⏱️ 1h

### 阶段八完成 (2025-11-29)

- [x] **#043** 实现日志管理器 `@Previous` `完成:2025-11-29` ⏱️ 3h
- [x] **#044** 实现日志轮转功能 `@Previous` `完成:2025-11-29` ⏱️ 2h
- [x] **#045** 实现异常分类和处理 `@Previous` `完成:2025-11-29` ⏱️ 4h
- [x] **#046** 实现错误恢复机制 `@Previous` `完成:2025-11-29` ⏱️ 3h

### 阶段一至七完成 (2025-11-28)

- [x] **#001-#042** 所有核心功能开发完成 `@Previous` `完成:2025-11-28`
  - 基础框架、配置管理、数据模型、浏览器引擎、变化检测、通知系统、CLI命令、任务调度器

---

## 🔒 阻塞/暂停 (BLOCKED)

> 当前无阻塞任务

---

## 📝 任务操作指南

### 1️⃣ 查看任务
```bash
# 查看全局任务列表
cat TASKS.md

# 查看详细任务信息
cat docs/tasks.md
```

### 2️⃣ 认领任务
1. 在 TASKS.md 中将 `@无人认领` 改为 `@你的名字`
2. 更新顶部的"Agent工作分配"表格
3. 立即提交避免冲突：
```bash
git pull origin main
git add TASKS.md
git commit -m "task: 认领任务 #051 配置管理测试"
git push origin main
```

### 3️⃣ 开始任务
1. 将任务从 TODO 移动到 DOING
2. 在任务中添加 `开始:2025-12-02 10:00`
3. 提交变更

### 4️⃣ 完成任务
1. 将 `[ ]` 改为 `[x]`
2. 移动任务到 DONE 区域
3. 添加 `完成:日期` 和 `⏱️ 实际:工时`
4. 提交变更并推送

### 5️⃣ 遇到阻塞
1. 移动任务到 BLOCKED 区域
2. 添加阻塞原因和依赖关系
3. 及时通知团队（Human决策者）

---

## ⚠️ 重要规则（所有AI Agent必须遵守）

### 🚨 强制规则

1. **开始工作前必须先 `git pull`**
2. **认领任务立即提交，不要拖延**
3. **一次只能认领一个任务**（除非有明确许可）
4. **禁止修改他人已认领的任务**
5. **完成任务必须更新TASKS.md**
6. **遇到问题立即标记为BLOCKED并说明原因**
7. **所有代码修改必须经过测试验证**

### 📋 任务规范

- 任务编号从 #001 开始递增
- 任务标题简洁明了（不超过50字）
- 必须标注优先级（高🔴/中🟡/低🟢）
- 必须标注预计工时和依赖关系
- 复杂任务应参考 docs/tasks.md 详细说明

### 🔄 同步规范

- 每次操作前：`git pull`
- 每次操作后：`git add TASKS.md && git commit -m "task: xxx" && git push`
- 提交信息格式：`task: <操作> #<任务编号> <简短描述>`
  - 示例：`task: 认领 #051 配置管理测试`
  - 示例：`task: 完成 #051 配置管理测试`
  - 示例：`task: 更新 #051 增加边界测试用例`

### 💬 协作规范

- 遇到冲突时人工解决，不要强制推送
- 发现任务描述不清晰，补充说明或询问Human
- 完成任务后更新"Agent工作分配"状态
- 任务相关讨论在任务详情文件中记录

### 🧪 测试规范

- 所有新功能必须有单元测试
- 测试覆盖率目标：>80%
- Bug修复必须有回归测试
- 使用pytest运行测试：`python -m pytest tests/ -v`

---

## 📈 统计信息

**任务总数**: 92 (+10 新增)
**已完成**: 73 (79%)
**进行中**: 0 (0%)
**待办**: 19 (21%)
**阻塞**: 0 (0%)

**阶段完成度**:
- 阶段一至八: 100% ✅
- 阶段九: 100% ✅
- 阶段十: 40% ⚠️
- 阶段十一 (AI分析): 83% ⚠️ (5/6)
- 阶段十二 (WebUI): Phase 1-4 100% ✅, Phase 5 0% ⚠️

**测试覆盖率**:
- 当前: ~20%
- 目标: >80%
- 需提升: 60%

**代码统计**:
- 总代码行数: ~22,485行
- Python文件数: 68个
- 测试代码: ~1,425行
- 核心模块: 15个

---

## 🔗 相关链接

- [项目README](README.md)
- [设计文档](docs/design.md)
- [需求文档](docs/requirements.md)
- [WebUI设计文档](docs/webui_design.md)
- [任务详细文档](docs/tasks.md)
- [API文档](docs/api.md)

---

## 🎯 里程碑计划

### ✅ 里程碑 1: MVP (已完成)
- 状态: 100% 完成
- 完成时间: 2025-11-28
- 核心功能: CLI框架、配置管理、浏览器引擎、基础检测

### ✅ 里程碑 2: 功能完善 (已完成)
- 状态: 100% 完成
- 完成时间: 2025-11-29
- 扩展功能: 多平台推送、智能检测、任务调度、日志系统

### 🚧 里程碑 3: 生产就绪 (进行中)
- 状态: 60% 完成
- 预计完成: 2025-12-14
- 关键任务: 测试覆盖、文档完善、性能优化、安全加固
- 最新进展: Discord通知测试通过，完整文档已创建

### 🚧 里程碑 3.5: AI分析功能 (基本完成)
- 状态: 83% 完成
- 完成时间: 2025-12-12
- 关键任务: AI服务模块、提示词系统、集成到通知流程
- 核心功能:
  - 支持DeepSeek R1及OpenAI兼容模型 ✅
  - 智能提取变化内容，生成自然语言摘要 ✅
  - 任务描述配置 ✅，个性化分析提示词 ✅
  - AI配置管理 ✅
  - 单元测试待完成 ⚠️

### 🚧 里程碑 4: WebUI (进行中)
- 状态: 80% 完成
- 预计完成: 2025-12-28
- 设计文档: [docs/webui_design.md](docs/webui_design.md)
- 关键任务:
  - ✅ Phase 1 (MVP): FastAPI后端、Vue3前端、Dashboard、Tasks页面
  - ✅ Phase 2 (核心): SSE实时通知、History页面
  - ✅ Phase 3 (配置): Settings页面、通知/AI配置
  - ✅ Phase 4 (部署): Docker镜像、docker-compose、CLI web命令
  - ⬜ Phase 5 (体验优化): 底部状态栏、监控控制、主题切换、移动端适配
- 技术栈:
  - 后端: FastAPI + SSE
  - 前端: Vue 3 + TypeScript + Naive UI + Pinia
  - 部署: Docker + docker-compose

### 📅 里程碑 5: 正式发布 (规划中)
- 状态: 0% 完成
- 预计完成: 2025-12-30
- 发布准备: 打包配置、发布检查、部署文档

---

## 🚨 当前紧急事项

1. **WebUI 体验优化** ⚠️ Phase 5 新任务
   - 新增 10 个前端优化任务 (#085 - #094)
   - 核心功能补全：底部状态栏、监控控制按钮、历史导出、关于页面
   - 体验优化：主题切换、任务卡片视图、Diff 优化、移动端适配
   - 优先级排序：#094 > #086 > #085 > #089 > #088 > 其他

2. **前端静态文件服务** ✅ 已修复 (2025-12-24)
   - 修复 WebUI 前端页面无法访问的问题
   - 将状态 API 从 "/" 移动到 "/status"
   - 添加 SPA 路由支持

3. **AI分析功能** ✅ 基本完成
   - ✅ 创建AI分析服务模块（支持DeepSeek R1及OpenAI兼容模型）
   - ✅ 添加任务描述字段
   - ✅ 添加AI配置到config.json
   - ✅ 实现提示词模板系统
   - ✅ 集成到推送通知流程
   - 🔲 编写AI模块测试

3. **Discord通知功能** ✅ 已完成
   - Discord平台配置修复
   - API兼容性问题修复
   - 端到端测试通过
   - 实际部署验证成功

2. **项目文档** ✅ 已完成
   - 完整的README文档
   - 快速开始指南（QUICKSTART.md）
   - 更新日志（CHANGELOG.md）
   - 所有文档与实际功能同步

3. **CLI命令优化** ✅ 已完成 (2025-12-08)
   - list/status命令显示真实任务状态
   - start命令自动启用任务
   - 用户体验显著提升

4. **测试覆盖率低** ⚠️ 待完成
   - 当前仅20%，需要快速提升到50%+
   - 优先完成核心模块单元测试
   - 需要测试其他通知平台

5. **其他通知平台** ⚠️ 待测试
   - Telegram 通知 - 待测试
   - 飞书通知 - 待测试
   - PushPlus 通知 - 待测试

---

**注意**: 此文件是项目的核心协作文件，任何修改都会影响所有开发者。请谨慎操作并及时同步！

**维护者**: WebMon 开发团队
**更新频率**: 每日更新或任务变更时更新
