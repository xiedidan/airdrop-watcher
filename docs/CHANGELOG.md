# 更新日志

本文档记录 WebMon 项目的所有重要变更。

## [未发布]

### 新增
- 完整的 CLI 命令系统（init, add, remove, list, start, stop, status, test, history）
- Playwright 浏览器引擎集成
- 智能变化检测算法（哈希对比、相似度分析）
- 多平台通知支持（Discord、Telegram、飞书、PushPlus）
- 任务调度和并发管理系统
- 配置管理系统（JSON 配置 + 环境变量）
- 历史记录和变化追踪
- 代理支持
- 详细的日志系统
- 资源管理和优化
- CSS 选择器支持
- 本地测试服务器（test_server.py）

### 已测试
- Discord 通知功能 - 测试通过 ✅
- 本地测试服务器 - 正常运行 ✅
- 变化检测算法 - 功能正常 ✅
- 任务调度器 - 稳定运行 ✅

### 待测试
- Telegram 通知
- 飞书通知
- PushPlus 通知

### 已知问题
- ChangeDetector.get_change_details() 方法未实现（已通过简化通知流程绕过）
- 环境变量引用系统（${VAR}）在某些情况下不工作（已通过直接配置绕过）

### 技术债务
- 需要实现完整的 get_change_details() API
- 需要完善环境变量引用解析系统
- 需要添加更多单元测试

## [开发阶段] - 2025-12-07

### 第八阶段 - 通知系统测试与优化
- 修复 Discord 平台 update_config() 方法
- 修复 await 调用同步函数的问题
- 简化通知流程，跳过 get_change_details
- 成功测试 Discord 通知功能
- 更新项目文档

### 第七阶段 - 网络安全功能
- 实现代理支持
- 添加网络配置管理
- 优化浏览器资源管理

### 第六阶段 - 任务调度系统
- 实现任务调度器
- 添加执行引擎
- 实现任务队列和优先级管理
- 添加资源管理器

### 第五阶段 - 变化检测算法
- 实现哈希检测器
- 实现相似度检测器
- 添加智能检测策略

### 第四阶段 - 通知推送系统
- 实现通知服务框架
- 添加 Discord 平台支持
- 添加 Telegram 平台支持
- 添加飞书平台支持
- 添加 PushPlus 平台支持
- 实现通知模板引擎

### 第三阶段 - 浏览器引擎
- 集成 Playwright
- 实现浏览器引擎基础功能
- 添加网页内容获取功能

### 第二阶段 - 配置管理系统
- 实现配置管理器
- 添加 JSON 配置支持
- 添加环境变量配置
- 实现配置验证

### 第一阶段 - 基础框架
- 创建项目结构
- 实现 CLI 框架
- 添加基础命令（init, add, list）
- 实现数据模型
- 添加存储系统

## 版本规划

### v1.0.0（计划中）
目标：首个稳定版本

必须功能：
- [x] 完整的 CLI 命令
- [x] 浏览器引擎集成
- [x] 变化检测算法
- [x] 多平台通知（至少 Discord 测试通过）
- [x] 任务调度系统
- [x] 配置管理
- [x] 日志系统
- [ ] 完整的单元测试
- [ ] 完整的文档

### v1.1.0（计划中）
目标：增强功能

计划功能：
- [ ] Web 管理界面
- [ ] API 接口
- [ ] 数据库支持（SQLite/PostgreSQL）
- [ ] 多用户支持
- [ ] 任务分组管理
- [ ] 更多通知平台（微信、企业微信等）
- [ ] 高级检测算法（机器学习）
- [ ] 性能监控和优化

### v1.2.0（计划中）
目标：企业级功能

计划功能：
- [ ] 分布式部署
- [ ] 负载均衡
- [ ] 高可用性
- [ ] 监控告警
- [ ] 数据分析和报表
- [ ] 插件系统

## 贡献者

感谢所有贡献者的努力！

## 许可证

MIT License
